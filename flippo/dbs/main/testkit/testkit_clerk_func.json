{
  "uri": "xo.575692746724068956",
  "aux": "testkit",
  "kind": "js",
  "name": "testkit clerk applet",
  "media": "\n        lain.rom.testkit_clerk = () => {\n            const targetElement = document.getElementById(\"testkit_clerk\");\n            if (!targetElement) {\n                console.error('Target element not found');\n                return;\n            }\n            const clerk_select = document.getElementById('testkit_clerkSelect');\n            const reset = () => {\n                targetElement.innerHTML = ''; // Clear the current content\n                let htmlString = '';\n                if (clerk_select.value === \"cache\") {\n                    document.getElementById('testkit_clerkSelectDesc').innerHTML = '<i>da following are cached as staged! (X to destroy)</i>';\n                    lain.cache.forEach(function(item, index) {\n                        htmlString += '<a href=\"#\" id=\"removeCache_' + index + '\">X</a> ' + item.name + '<br>';\n                    });\n                } else if (clerk_select.value === \"rom\") {\n                    document.getElementById('testkit_clerkSelectDesc').innerHTML = '<i>da following are activated functions!</i>';\n                    Object.entries(lain.rom).filter(function([key, value]) { return value !== null; })\n                        .forEach(function([key, value]) {\n                            htmlString += key + '()<br>';\n                        });\n                } else if (clerk_select.value === \"dvr\") {\n                    document.getElementById('testkit_clerkSelectDesc').innerHTML = '<i>heres what dvr has indexed! (X to attempt build)</i>';\n                    Object.entries(lain.dvr).forEach(function([key, value]) {\n                        if (value !== undefined) {\n                            htmlString += '<a href=\"#\" id=\"dvr_' + key + '\">X</a> ' + key + ' <i> - ' + value.name + '</i><br>';\n                        }\n                    });\n                } else if (clerk_select.value === \"ls\") {\n                    document.getElementById('testkit_clerkSelectDesc').innerHTML = '<i>keys placed in local storage:</i>';\n                    Object.keys(localStorage).forEach(function(key) {\n                        htmlString += + key + '<br>';\n                    });\n                } else if (clerk_select.value === \"db\") {\n                    document.getElementById('testkit_clerkSelectDesc').innerHTML = '<i>here are objects in IndexedDB: (X to attempt dvr)</i>';\n                    lain.rom.dbModule.openDB().then(function() {\n                        lain.db.forEach(function(id) {\n                            lain.rom.dbModule.getData(id).then(function(data) {\n                                if (typeof data === 'object' && data !== null) {\n                                    htmlString += '<a href=\"#\" id=\"moveTodvr_' + id + '\">X</a>' + ' id(' + id + '): ' + ( (data.file + ' ' + data.name) || 'data.name' || 'unnamed') + '<br>';\n                                    targetElement.innerHTML = htmlString;\n                                    document.getElementById('moveTodvr_' + id).onclick = function() {\n                                        alice.dvr[data.file] = data;\n                                        console.log('Moved ' + data.name + ' to dvr under key ' + data.file);\n                                        lain.rom.dbModule.deleteData(id);\n                                        reset();\n                                        return false;\n                                    };\n                                }\n                            });\n                        });\n                    });\n                }\n                targetElement.innerHTML = htmlString;\n\n                // Attach event listeners after elements are added to the DOM\n                if (clerk_select.value === \"cache\") {\n                    lain.cache.forEach(function(item, index) {\n                        document.getElementById('removeCache_' + index).onclick = function() {\n                            console.log(item)\n                            lain.rom.removeCacheItem({index: index});\n                            reset();\n                            return false;\n                        };\n                    });\n                } else if (clerk_select.value === \"dvr\") {\n                    Object.keys(lain.dvr).forEach(function(key) {\n                        var element = document.getElementById('dvr_' + key);\n                        if (element) {\n                            element.onclick = function() {\n                                navi(alice, \"alice.dvr.\" + key, \"document.body\");\n                                return false;\n                            };\n                        }\n                    });\n                }\n                \n            };\n            reset();\n            document.getElementById('testkit_clerkButton').addEventListener('click', reset);\n            document.getElementById('testkit_clerk_rqButton').addEventListener('click', function() {\n                let rq = testkit_clerk_rqinput.value;\n                testkit_clerk_rqinput.value = '';\n                navi(lain, JSON.parse(JSON.stringify({aux: 'testkit', kind: 'jsmod', name: rq, media: '/flippo/mod/' + rq})));\n                lain.rom.testkit_handler.jsmod({kind: \"jsmod\", name: \"rqmod: \"+ rq, media: \"/quest/mod/\" + rq});\n            });\n        }\n        lain.rom.testkit_clerk();\n        "
}